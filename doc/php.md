# PHP目前比较常见的四种大运行模式

1. CGI（通用网关接口 / Common Gateway Interface）
2. FastCGI（常驻型CGI / Long-Live CGI）
3. CLI（命令行运行 / Command Line Interface）
4. Web模块模式（Apache等Web服务器运行的模式）

## CGI

CGI即通用网关接口（Common Gateway Interface），它是一段程序，通俗的讲CGI就象是一座桥，把网页和Web服务器中的执行程序连接起来，它把HTML接收的指令传递给服务器的执行程序，再把服务器执行程序的结果返还给HTML页。CGI 的跨平台性能极佳，几乎可以在任何操作系统上实现。`CGI已经是比较老的模式了，这几年都很少用了。`

###优点

 1. CGI 的跨平台性能极佳，几乎可以在任何操作系统上实现。
 2. Web Server和具体的程序处理独立开来，结构清晰，可控性强。

###缺点

 1. 在高访问需求的情况下，CGI的进程Fork就会成为很大的服务器负担，想 象一下数百个并发请求导致服务器Fork出数百个进程就明白了。这也是为什么CGI一直背负性能低下，高资源消耗的恶名的原因。
 2. php-cgi变更php.ini配置后需重启php-cgi才能让新的php-ini生效，不可以平滑重启。
 3. 直接杀死php-cgi进程,php就不能运行了。(PHP-FPM守护进程会平滑从新生成新的子进程。）

## FastCGI

FastCGI是CGI的升级版本，FastCGI像是一个常驻 (long-live)型的 CGI，它可以一直执行着，只要激活后，不会每次都要花费时间去 Fork 一次 （这是 CGI 最为人诟病的 fork-and-execute 模式）。

FastCGI是一个可伸缩地、高速地在HTTP server和动态脚本语言间通信的接口。多数流行的HTTP server都支持FastCGI，包括Apache、Nginx和lighttpd等，同时，FastCGI也被许多脚本语言所支持，其中就有PHP。

`php-cgi是被调用的进程，php-fpm是配置和管理进程的。`

###优点

 1. 单独的运行程序，当出现子程序死掉时，系统可以随意关闭，然后在重新分配！
 2. fastCGI支持分布式运算，所以fastCGI怎么样都不会拖垮服务器
 3. 把动态逻辑处理从WEB服务器中分离出来，使服务器专心进行I/O处理，少量的运算和大量的静态文件！

###缺点

 1. 多进程比多线程消耗更多的服务器内存，php-cgi.exe解释器每进程消耗7至25兆内存，将这个数字乘以50或100试试。
 2. 性能。确实有时候多线程CGI解释器更快，呵呵，而且有时候，它也很稳定。
 
## FastCGI

CGI即通用网关接口（Common Gateway Interface），它是一段程序，通俗的讲CGI就象是一座桥，把网页和Web服务器中的执行程序连接起来，它把HTML接收的指令传递给服务器的执行程序，再把服务器执行程序的结果返还给HTML页。CGI 的跨平台性能极佳，几乎可以在任何操作系统上实现。`CGI已经是比较老的模式了，这几年都很少用了。`

###优点

 1. CGI 的跨平台性能极佳，几乎可以在任何操作系统上实现。
 2. Web Server和具体的程序处理独立开来，结构清晰，可控性强。

###缺点

 1. 在高访问需求的情况下，CGI的进程Fork就会成为很大的服务器负担，想 象一下数百个并发请求导致服务器Fork出数百个进程就明白了。这也是为什么CGI一直背负性能低下，高资源消耗的恶名的原因。
 2. php-cgi变更php.ini配置后需重启php-cgi才能让新的php-ini生效，不可以平滑重启。
 3. 直接杀死php-cgi进程,php就不能运行了。(PHP-FPM守护进程会平滑从新生成新的子进程。）
 
## FastCGI

CGI即通用网关接口（Common Gateway Interface），它是一段程序，通俗的讲CGI就象是一座桥，把网页和Web服务器中的执行程序连接起来，它把HTML接收的指令传递给服务器的执行程序，再把服务器执行程序的结果返还给HTML页。CGI 的跨平台性能极佳，几乎可以在任何操作系统上实现。`CGI已经是比较老的模式了，这几年都很少用了。`

###优点

 1. CGI 的跨平台性能极佳，几乎可以在任何操作系统上实现。
 2. Web Server和具体的程序处理独立开来，结构清晰，可控性强。

###缺点

 1. 在高访问需求的情况下，CGI的进程Fork就会成为很大的服务器负担，想 象一下数百个并发请求导致服务器Fork出数百个进程就明白了。这也是为什么CGI一直背负性能低下，高资源消耗的恶名的原因。
 2. php-cgi变更php.ini配置后需重启php-cgi才能让新的php-ini生效，不可以平滑重启。
 3. 直接杀死php-cgi进程,php就不能运行了。(PHP-FPM守护进程会平滑从新生成新的子进程。）


